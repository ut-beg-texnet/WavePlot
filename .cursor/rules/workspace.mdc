---
alwaysApply: true
---

- The original code of the project we are working on was written in Turbo Pascal and is inside the 'Turbo pascal version' directory.
- The 'waveplot_python' directory has the Python code that we are currently working with. 
- Never modify files with the following extensions unless explicitly requested: PAS, pas, SET, PRT, crk, dmp, geo, hst, m, map, psc, snp, EXE


### File Format (per DATA_RSC.PAS)
- Each .MAP record: 8-byte header + 120-byte body
- Header: (dummy_int, pl_type) where pl_type = 0=Snapshot, 1=History, 2=Dump, 3=Geometry, 4=Crack
- Body: Variable-length field section + padding (only leading bytes used per record type)

### Offset Computation
The full reader should compute file offsets exactly like Pascal DI_ReadMap:
- **Snapshots (.SNP)**: `offset += Xqty * (Yqty + 2)` (float32 elements)
- **Histories (.HST)**: `offset += Xqty * 3` (float32 elements)  
- **Dumps (.DMP)**: `offset += 1 + iqty*jqty*kqty*Vqty + 1` (float32 elements)
- **Geometries (.GEO)**: `offset += GRlen` (bytes)
- **Crack data (.CRK)**: `offset += CrLen` (bytes)



